angular.module("dashBoard.pagesCtrl").controller("dashBoardEditPagesController",["$scope","$stateParams","store","pageLoaders","publishPages",function(e,t,n,r,i){var s;return e.$on("$viewContentLoaded",function(){return $("input#title").characterCounter()}),e.post=[],e.fetchInfo=function(){return r.fetchForEditing(t.id).then(function(t){return console.log(t.data.results),e.post={id:t.data.results[0].id,title:t.data.results[0].post_title,content:t.data.results[0].post_content,is_parent:t.data.results[0].parent_page_id}},function(e){return Materialize.toast("Something went wrong",4e3)})},e.openModal=function(e){console.log(e);if(e==="schedule")return $("#scheduleModal").openModal();if(e==="preview")return $("#previewModal").openModal()},s=n.get("user"),e.publishPage=function(){return e.post.author=s.username,e.post.publish_date=moment().format("YYYY-MM-DD h:mm:ss a"),e.post.is_draft=!1,i.updatePage(e.post).then(function(e){console.log(e);if(e.data.status==="Success")return Materialize.toast("Post Updated Successfully","4000");if(e.data.status==="Error")return Materialize.toast(e.data.message,"4000")},function(e){return Materialize.toast("Something went wrong",4e3)})}}]);