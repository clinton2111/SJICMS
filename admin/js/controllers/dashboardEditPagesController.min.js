angular.module("dashBoard.pagesCtrl").controller("dashBoardEditPagesController",["$scope","$stateParams","store","pageLoaders","publishPages",function(a,b,c,d,e){var f;return a.$on("$viewContentLoaded",function(){return $("input#title").characterCounter()}),a.post=[],a.fetchInfo=function(){return d.fetchForEditing(b.id).then(function(b){return console.log(b.data.results),a.post={id:b.data.results[0].id,title:b.data.results[0].post_title,content:b.data.results[0].post_content,is_parent:b.data.results[0].parent_page_id}},function(a){return Materialize.toast("Something went wrong",4e3)})},a.openModal=function(a){return console.log(a),"schedule"===a?$("#scheduleModal").openModal():"preview"===a?$("#previewModal").openModal():void 0},f=c.get("user"),a.publishPage=function(){return a.post.author=f.username,a.post.publish_date=moment().format("YYYY-MM-DD h:mm:ss a"),a.post.is_draft=!1,e.updatePage(a.post).then(function(a){return console.log(a),"Success"===a.data.status?Materialize.toast("Post Updated Successfully","4000"):"Error"===a.data.status?Materialize.toast(a.data.message,"4000"):void 0},function(a){return Materialize.toast("Something went wrong",4e3)})}}]);