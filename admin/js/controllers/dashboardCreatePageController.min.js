angular.module("dashBoard.pagesCtrl").controller("dashBoardCreatePagesController",["$scope","store","publishPages","pageLoaders",function(a,b,c,d){var e;return a.$on("$viewContentLoaded",function(){return $("input#title").characterCounter(),a.parentStatus=!0,a.choseParentFlag=!0,$("select").material_select()}),a.parentId=0,a.pages=[],e=b.get("user"),a.publishPage=function(){return a.parentStatus===!0?a.post.is_parent="NULL":a.post.is_parent=a.parentId.id,a.post.author=e.username,a.post.publish_date=moment().format("YYYY-MM-DD h:mm:ss a"),a.post.is_draft=!1,c.uploadPage(a.post).then(function(b){return Materialize.toast("Post Published Successfully","4000"),a.post={}},function(a){return Materialize.toast("Something went wrong",4e3)})},a.openModal=function(a){return"schedule"===a?$("#scheduleModal").openModal():"preview"===a?$("#previewModal").openModal():void 0},a.saveDraft=function(){return a.parentStatus===!0?a.post.is_parent="NULL":a.post.is_parent=a.parentId,a.post.author=e.username,a.post.publish_date="Null",a.post.is_draft=!0,c.uploadPage(a.post).then(function(b){return Materialize.toast("Draft Saved Successfully","4000"),a.post={}},function(a){return Materialize.toast("Something went wrong",4e3)})},a.schedulePost=function(){return a.parentStatus===!0?a.post.is_parent="NULL":a.post.is_parent=a.parentId,a.post.author=e.username,a.post.publish_date=moment(a.post.publish_date).format("YYYY-MM-DD h:mm:ss a"),a.post.is_draft=!1,c.uploadPage(a.post).then(function(b){return Materialize.toast("Post Scheduled Successfully","4000"),a.post={},$("#scheduleModal").closeModal()},function(a){return Materialize.toast("Something went wrong",4e3)})},a.fetchPageList=function(){return a.parentStatus===!0?a.choseParentFlag=!0:(a.choseParentFlag=!1,d.fetchpageNames().then(function(b){return a.pages=b.data.results},function(a){return Materialize.toast("Something went wrong",4e3)}))}}]);