angular.module("dashBoard.pagesCtrl").controller("dashBoardCreatePagesController",["$scope","store","publishPages","pageLoaders",function(e,t,n,r){var i;return e.$on("$viewContentLoaded",function(){return $("input#title").characterCounter(),e.parentStatus=!0,e.choseParentFlag=!0,$("select").material_select()}),e.parentId=0,e.pages=[],i=t.get("user"),e.publishPage=function(){return e.parentStatus===!0?e.post.is_parent="NULL":e.post.is_parent=e.parentId.id,e.post.author=i.username,e.post.publish_date=moment().format("YYYY-MM-DD h:mm:ss a"),e.post.is_draft=!1,n.uploadPage(e.post).then(function(t){return Materialize.toast("Post Published Successfully","4000"),e.post={}},function(e){return Materialize.toast("Something went wrong",4e3)})},e.openModal=function(e){if(e==="schedule")return $("#scheduleModal").openModal();if(e==="preview")return $("#previewModal").openModal()},e.saveDraft=function(){return e.parentStatus===!0?e.post.is_parent="NULL":e.post.is_parent=e.parentId,e.post.author=i.username,e.post.publish_date="Null",e.post.is_draft=!0,n.uploadPage(e.post).then(function(t){return Materialize.toast("Draft Saved Successfully","4000"),e.post={}},function(e){return Materialize.toast("Something went wrong",4e3)})},e.schedulePost=function(){return e.parentStatus===!0?e.post.is_parent="NULL":e.post.is_parent=e.parentId,e.post.author=i.username,e.post.publish_date=moment(e.post.publish_date).format("dddd, MMMM Do YYYY, h:mm:ss a"),e.post.is_draft=!1,n.uploadPage(e.post).then(function(t){return Materialize.toast("Post Scheduled Successfully","4000"),e.post={},$("#scheduleModal").closeModal()},function(e){return Materialize.toast("Something went wrong",4e3)})},e.fetchPageList=function(){return e.parentStatus===!0?e.choseParentFlag=!0:(e.choseParentFlag=!1,r.fetchpageNames().then(function(t){return e.pages=t.data.results},function(e){return Materialize.toast("Something went wrong",4e3)}))}}]);