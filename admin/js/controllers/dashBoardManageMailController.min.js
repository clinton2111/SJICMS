angular.module("dashBoard.pagesCtrl").controller("dashBoardManageMailController",["$scope","mailFactory",function(e,t){var n;return n=0,e.mails=[],e.fetchMail=function(){return t.fetchMail(n).then(function(t){var n;return t.data.status==="Success"?(n=JSON.parse(t.data.results),_.each(n,function(t){return e.mails.push(t)}),Materialize.toast(t.data.message,4e3)):Materialize.toast(t.data.message,4e3)},function(e){return Materialize.toast("Something went wrong",4e3)})},e.loadMoreMail=function(){return n=e.mails.length,e.fetchMail()},e.detailedView=function(t){var n;return n=e.mails[t],e.detailedMail={index:t,sender_name:n.sender_name,sender_email:n.sender_email,sender_subject:n.sender_subject,sender_message:n.sender_message}},e["delete"]=function(n){var r;return r=e.mails[n].id,t.deleteMail(r).then(function(t){return t.data.status==="Success"?(e.mails.splice(n,1),e.detailedMail={},Materialize.toast(t.data.message,4e3)):Materialize.toast(t.data.message,4e3)},function(e){return Materialize.toast("Something went wrong",4e3)})},e.openReplyModal=function(){return $("#replyModal").openModal()},e.sendReply=function(){return e.reply.to_name=e.detailedMail.sender_name,e.reply.to_email=e.detailedMail.sender_email,e.reply.subject="RE: "+e.detailedMail.sender_subject,e.reply.finalmsg='Sent message:"<i>'+e.detailedMail.sender_message+'</i>" <br><br>'+e.reply.msg,t.sendMail(e.reply).then(function(t){return t.data.status==="Success"?(e.reply={},$("#replyModal").closeModal(),Materialize.toast(t.data.message,4e3)):Materialize.toast(t.data.message,4e3)},function(e){return Materialize.toast("Something went wrong",4e3)})}}]).filter("myDate",function(){return function(e){if(e)return moment(e,"YYYY-MM-DD h:mm:ss a").format("dddd, MMMM Do YYYY, h:mm a")}});