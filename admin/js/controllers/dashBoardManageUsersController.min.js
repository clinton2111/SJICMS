angular.module("dashboard.settingsCtrl").controller("dashBoardManageUsersController",["$scope","settingsFactory","md5","store",function(e,t,n,r){var i;return e.$on("$viewContentLoaded",function(){return $("select").material_select()}),e.users=[],e.roles=[{value:"admin",label:"Administrator"},{value:"content_manager",label:"Content Manager"}],i=r.get("user"),e.createuser=function(){return _.isNull(e.newuser.role)||_.isEmpty(e.newuser.role)||_.isUndefined(e.newuser.role)?(Materialize.toast("Please assign a role",4e3),!1):(e.newuser.role=e.newuser.role.value,e.newuser.passEncrypted=n.createHash(e.newuser.password||""),t.addUser(e.newuser).then(function(t){var n;return n=t.data,n.status==="Success"?(Materialize.toast(n.status+" - "+n.message,4e3),e.users.push(id)):Materialize.toast(n.status+" - "+n.message,4e3)},function(e){return Materialize.toast("Something went wrong",4e3)}))},e.fetchAdminDetails=function(){return t.fetchAdminDetails().then(function(t){var n,r;return n=t.data,n.status==="Success"?(r=n.results,_.each(r,function(t){return e.users.push(t)}),console.log(e.users),Materialize.toast(n.status+" - "+n.message,4e3)):Materialize.toast(n.status+" - "+n.message,4e3)},function(e){return Materialize.toast("Something went wrong",4e3)})},e.deletePerson=function(n){var r;return r={id_to_be_deleted:e.users[n].id,my_id:i.id},t.deletePerson(r).then(function(t){var r;return r=t.data,r.status==="Success"?(e.users.splice(n,1),Materialize.toast(r.status+" - "+r.message,4e3)):Materialize.toast(r.status+" - "+r.message,4e3)},function(e){return Materialize.toast("Something went wrong",4e3)})}}]);