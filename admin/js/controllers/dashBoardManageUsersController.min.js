angular.module("dashboard.settingsCtrl").controller("dashBoardManageUsersController",["$scope","settingsFactory","md5","store",function(a,b,c,d){var e;return a.$on("$viewContentLoaded",function(){return $("select").material_select()}),a.users=[],a.roles=[{value:"admin",label:"Administrator"},{value:"content_manager",label:"Content Manager"}],e=d.get("user"),a.createuser=function(){return _.isNull(a.newuser.role)||_.isEmpty(a.newuser.role)||_.isUndefined(a.newuser.role)?(Materialize.toast("Please assign a role",4e3),!1):(a.newuser.role=a.newuser.role.value,a.newuser.passEncrypted=c.createHash(a.newuser.password||""),b.addUser(a.newuser).then(function(b){var c;return c=b.data,"Success"===c.status?(Materialize.toast(c.status+" - "+c.message,4e3),a.users.push(id)):Materialize.toast(c.status+" - "+c.message,4e3)},function(a){return Materialize.toast("Something went wrong",4e3)}))},a.fetchAdminDetails=function(){return b.fetchAdminDetails().then(function(b){var c,d;return c=b.data,"Success"===c.status?(d=c.results,_.each(d,function(b){return a.users.push(b)}),console.log(a.users),Materialize.toast(c.status+" - "+c.message,4e3)):Materialize.toast(c.status+" - "+c.message,4e3)},function(a){return Materialize.toast("Something went wrong",4e3)})},a.deletePerson=function(c){var d;return d={id_to_be_deleted:a.users[c].id,my_id:e.id},b.deletePerson(d).then(function(b){var d;return d=b.data,"Success"===d.status?(a.users.splice(c,1),Materialize.toast(d.status+" - "+d.message,4e3)):Materialize.toast(d.status+" - "+d.message,4e3)},function(a){return Materialize.toast("Something went wrong",4e3)})}}]);